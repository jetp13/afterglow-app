<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ChemAid | é¢¨éšªæ··åˆè¨ˆç®—å™¨</title>
    <style>
        /* å»¶çºŒ High-Stimulation å‹å–„çš„é»‘åº•é¢¨æ ¼ */
        body {
            background-color: #000;
            color: #ccc;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        .container { max-width: 600px; width: 100%; }

        h1 { color: #fff; text-align: center; margin-bottom: 5px; font-size: 1.5rem; letter-spacing: 1px; }
        .subtitle { color: #666; text-align: center; font-size: 0.8rem; margin-bottom: 25px; }

        /* çµæœé¡¯ç¤ºå€ - é€™æ˜¯ä½ çš„ã€Œç´…ç¶ ç‡ˆã€ */
        #result-card {
            background: #111;
            border: 1px solid #333;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 25px;
            text-align: center;
            min-height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: all 0.3s;
        }

        #result-icon { font-size: 2.5rem; margin-bottom: 10px; }
        #result-title { font-size: 1.2rem; font-weight: bold; color: #fff; margin-bottom: 5px; }
        #result-desc { font-size: 0.9rem; color: #888; line-height: 1.4; }

        /* ç¶²æ ¼é¸æ“‡å€ */
        .grid-label { color: #555; font-size: 0.8rem; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 1px; }
        
        .substance-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr); /* æ‰‹æ©Ÿä¸Šé¡¯ç¤ºä¸‰åˆ— */
            gap: 10px;
            margin-bottom: 30px;
        }

        .chip {
            background: #1a1a1a;
            border: 1px solid #333;
            color: #aaa;
            padding: 12px 5px;
            border-radius: 8px;
            font-size: 0.85rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            user-select: none;
        }

        /* é¸ä¸­ç‹€æ…‹ */
        .chip.selected {
            background: #fff;
            color: #000;
            font-weight: bold;
            box-shadow: 0 0 10px rgba(255,255,255,0.3);
        }

        /* ç¦ç”¨ç‹€æ…‹ (é¸äº†å…©å€‹å¾Œï¼Œå…¶ä»–çš„è®Šæš—) */
        .chip.disabled {
            opacity: 0.3;
            pointer-events: none;
        }

        /* åº•éƒ¨å°èˆª */
        .nav-bar {
            margin-top: auto;
            border-top: 1px solid #222;
            padding-top: 20px;
            width: 100%;
            display: flex;
            justify-content: space-around;
        }
        .nav-link { color: #555; text-decoration: none; font-size: 0.9rem; }
        .nav-link.active { color: #fff; font-weight: bold; }

    </style>
</head>
<body>

<div class="container">
    <h1>CHEM-AID</h1>
    <div class="subtitle">ç‰©è³ªäº¤äº’ä½œç”¨é¢¨éšªè©•ä¼°</div>

    <div id="result-card">
        <div id="result-icon">ğŸ›¡ï¸</div>
        <div id="result-title">è«‹é¸æ“‡å…©ç¨®ç‰©è³ª</div>
        <div id="result-desc">ç³»çµ±å°‡è©•ä¼°å…©è€…æ··åˆä½¿ç”¨çš„æ½›åœ¨ç”Ÿç†é¢¨éšªã€‚</div>
    </div>

    <div class="grid-label">å¸¸è¦‹ç‰©è³ª (é»é¸å…©é …)</div>
    <div class="substance-grid" id="grid">
        </div>
</div>

<div class="nav-bar">
    <a href="Support.html" class="nav-link">â† è¿”å›é¸å–®</a>
    <a href="../index.html" class="nav-link" style="color:#d32f2f;">ç·Šæ€¥é€€å‡º</a>
</div>

<script>
    // 1. å®šç¾©ç‰©è³ªæ¸…å–® (ç”¨ä»£è™Ÿï¼Œé¿å…å¯©æŸ¥æ•æ„Ÿè©ï¼Œä¹Ÿå¯ä»¥ç”¨ç¸®å¯«)
    const substances = [
        { id: 'alc', name: 'é…’ç²¾ (Alcohol)' },
        { id: 'g',   name: 'Gæ°´ (GHB/GBL)' },
        { id: 'k',   name: 'Kä»–å‘½ (Ketamine)' },
        { id: 'tina',name: 'å†° (Meth)' },
        { id: 'e',   name: 'E/MDMA' },
        { id: 'rush',name: 'RUSH (Poppers)' },
        { id: 'via', name: 'å‰å“¥ (Viagra)' },
        { id: 'weed',name: 'å¤§éº» (Cannabis)' },
        { id: 'coke',name: 'å¯å¡å›  (Coke)' }
    ];

    // 2. å®šç¾©é¢¨éšªé‚è¼¯ (é€™æ˜¯æ ¸å¿ƒè³‡ç”¢)
    // High Risk = ğŸ”´, Caution = ğŸŸ¡, Low Risk = ğŸŸ¢
    // é€™è£¡åªåˆ—èˆ‰å¹¾å€‹é—œéµç¯„ä¾‹ï¼Œå¯¦éš›ä¸Šä½ è¦æ ¹æ“š TripSit å®Œå–„
    const interactions = [
        // è‡´å‘½çµ„åˆ (Deadly)
        { pair: ['g', 'alc'], level: 'danger', title: 'ğŸ”´ è‡´å‘½å±éšª (Deadly)', desc: 'æ¥µåº¦å±éšªï¼å…©è€…çš†ç‚ºä¸­æ¨ç¥ç¶“æŠ‘åˆ¶åŠ‘ï¼Œæ··åˆæ¥µæ˜“å°è‡´æ˜è¿·ã€å‘¼å¸åœæ­¢èˆ‡å˜”åçª’æ¯ã€‚çµ•å°ç¦æ­¢ã€‚' },
        { pair: ['rush', 'via'], level: 'danger', title: 'ğŸ”´ è‡´å‘½è¡€å£“é©Ÿé™', desc: 'æ¥µåº¦å±éšªï¼åŒæ™‚ä½¿ç”¨æœƒå°è‡´è¡€å£“ç¬é–“å´©ç›¤ï¼Œå¼•ç™¼å¿ƒè‡Ÿé©Ÿåœæˆ–è…¦ç¼ºæ°§ã€‚çµ•å°ç¦æ­¢ã€‚' },
        { pair: ['tina', 'via'], level: 'danger', title: 'ğŸ”´ å¿ƒè‡Ÿéè¼‰é¢¨éšª', desc: 'èˆˆå¥®åŠ‘åŠ ä¸Šè¡€ç®¡æ“´å¼µåŠ‘ï¼Œå°å¿ƒè‡Ÿé€ æˆæ¥µå¤§è² æ“”ï¼Œå¯èƒ½å¼•ç™¼å¿ƒæ‚¸æˆ–å¿ƒè‡Ÿæ„å¤–ã€‚' },
        
        // è­¦å‘Šçµ„åˆ (Caution)
        { pair: ['alc', 'k'], level: 'warning', title: 'ğŸŸ¡ é«˜åº¦å™å¿ƒé¢¨éšª', desc: 'å®¹æ˜“å¼•ç™¼åŠ‡çƒˆå˜”åèˆ‡æšˆçœ©ï¼ˆK-holeï¼‰ï¼Œè‹¥æ„è­˜ä¸æ¸…æœ‰çª’æ¯é¢¨éšªã€‚' },
        { pair: ['tina', 'g'], level: 'warning', title: 'ğŸŸ¡ æ„è­˜æ–·ç‰‡é¢¨éšª', desc: 'èˆˆå¥®åŠ‘æœƒæ©è“‹ G çš„è—¥æ•ˆï¼Œå®¹æ˜“å°è‡´è£œè—¥éé‡ (OD)ï¼Œç•¶èˆˆå¥®åŠ‘é€€å»å¾Œæœƒç¬é–“æ˜è¿·ã€‚' },
        { pair: ['e', 'tina'], level: 'warning', title: 'ğŸŸ¡ ç¥ç¶“æ¯’æ€§ç–ŠåŠ ', desc: 'é›™é‡èˆˆå¥®åŠ‘ï¼Œé«”æº«éé«˜èˆ‡ç¥ç¶“æ¯’æ€§é¢¨éšªå€å¢ï¼ŒåŠ åŠ‡ Comedown æ†‚é¬±æ„Ÿã€‚' },
        
        // ä½é¢¨éšª/å…¶ä»– (Low Risk / Synergy) - ç”¨è©è¦å°å¿ƒ
        { pair: ['weed', 'alc'], level: 'low', title: 'ğŸŸ¢ æšˆçœ©åŠ æˆ', desc: 'é›–ç„¡è‡´å‘½é¢¨éšªï¼Œä½†å®¹æ˜“å°è‡´æ¥µåº¦æšˆçœ©ï¼ˆSpinningï¼‰æˆ–ææ…Œã€‚' },
    ];

    // ç‹€æ…‹è®Šæ•¸
    let selected = [];

    // åˆå§‹åŒ–ä»‹é¢
    const grid = document.getElementById('grid');
    substances.forEach(sub => {
        const btn = document.createElement('div');
        btn.className = 'chip';
        btn.innerText = sub.name;
        btn.onclick = () => toggleSelect(sub.id, btn);
        btn.id = `btn-${sub.id}`; // æ–¹ä¾¿æŸ¥æ‰¾
        grid.appendChild(btn);
    });

    function toggleSelect(id, btn) {
        // å¦‚æœå·²ç¶“é¸ä¸­ï¼Œå‰‡å–æ¶ˆ
        if (selected.includes(id)) {
            selected = selected.filter(item => item !== id);
            btn.classList.remove('selected');
        } else {
            // å¦‚æœé‚„æ²’æ»¿ 2 å€‹ï¼Œå‰‡é¸ä¸­
            if (selected.length < 2) {
                selected.push(id);
                btn.classList.add('selected');
            }
        }
        updateUI();
    }

    function updateUI() {
        // 1. æ§åˆ¶æŒ‰éˆ•ç¦ç”¨ç‹€æ…‹
        const allChips = document.querySelectorAll('.chip');
        if (selected.length >= 2) {
            allChips.forEach(chip => {
                if (!chip.classList.contains('selected')) {
                    chip.classList.add('disabled');
                }
            });
        } else {
            allChips.forEach(chip => chip.classList.remove('disabled'));
        }

        // 2. è¨ˆç®—çµæœ
        const card = document.getElementById('result-card');
        const icon = document.getElementById('result-icon');
        const title = document.getElementById('result-title');
        const desc = document.getElementById('result-desc');

        // é‡ç½®æ¨£å¼
        card.style.borderColor = '#333';
        card.style.background = '#111';

        if (selected.length < 2) {
            icon.innerText = 'ğŸ›¡ï¸';
            title.innerText = 'è«‹é¸æ“‡å…©ç¨®ç‰©è³ª';
            desc.innerText = 'ç³»çµ±å°‡è©•ä¼°å…©è€…æ··åˆä½¿ç”¨çš„æ½›åœ¨ç”Ÿç†é¢¨éšªã€‚';
            title.style.color = '#fff';
            return;
        }

        // æŸ¥æ‰¾äº¤äº’çµæœ (ä¸ç®¡é †åº)
        const result = interactions.find(i => 
            (i.pair[0] === selected[0] && i.pair[1] === selected[1]) ||
            (i.pair[0] === selected[1] && i.pair[1] === selected[0])
        );

        if (result) {
            icon.innerText = result.level === 'danger' ? 'â˜ ï¸' : (result.level === 'warning' ? 'âš ï¸' : 'â„¹ï¸');
            title.innerText = result.title;
            desc.innerText = result.desc;
            
            if (result.level === 'danger') {
                card.style.borderColor = '#d32f2f';
                card.style.background = 'rgba(211, 47, 47, 0.1)';
                title.style.color = '#ff5252';
            } else if (result.level === 'warning') {
                card.style.borderColor = '#fbc02d';
                card.style.background = 'rgba(251, 192, 45, 0.1)';
                title.style.color = '#fbc02d';
            } else {
                card.style.borderColor = '#388e3c';
                title.style.color = '#66bb6a';
            }
        } else {
            // æœªçŸ¥æˆ–ä½é¢¨éšª
            icon.innerText = 'â”';
            title.innerText = 'è³‡æ–™ä¸è¶³ / éœ€è¬¹æ…';
            desc.innerText = 'ç³»çµ±æš«ç„¡æ­¤ç‰¹å®šçµ„åˆçš„é«˜é¢¨éšªè­¦ç¤ºï¼Œä½†ä»è«‹ä¿æŒè¬¹æ…ï¼Œæ³¨æ„åŠ‘é‡èˆ‡èº«é«”åæ‡‰ã€‚';
            title.style.color = '#ccc';
        }
    }
</script>

</body>
</html>